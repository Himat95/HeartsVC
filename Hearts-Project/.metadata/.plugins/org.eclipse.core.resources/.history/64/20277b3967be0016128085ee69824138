import java.util.ArrayList;

public class BasicGame {

	public static void main(String[] args) {
		
		Deck d = new Deck();  	//Create a deck of 52 cards
		Table t = new Table(); 	//Create a table for the players to play on
		ArrayList<Player> players = new ArrayList<>(); 
		//An arraylist of players so I can use lambda expressions rather than loops
		//and we are able to use collection's methods. Lowering coding needed excessively.
		
		//Fill the players arraylist with 4 players, each with different IDs
		for(int i = 0; i < 4; i++) {
			players.add(new AIPlayer(i)); 
		}
		
		System.out.println("The Current Players and their scores: \n");
		players.forEach(x -> System.out.println(x.toString())); 
		
		
		d.shuffle(); //Shuffle the deck 
		
		players.forEach(x -> x.getPlayerHand().addCards(d.dealCards()));
		//Give each player 13 cards from the deck
		
		System.out.println("\n"); 
		System.out.println("The starting cards for each player, 13 in total: \n");
		players.forEach(x -> System.out.println(x.getPlayerHand().getCards()));
		// Print out the current cards each players have in their hand
		
		players.forEach(x -> x.getPlayerHand().sortHand());
		//Organise every player's hand so its in order by suit and then value
		
		// --------------------------------Game Play--------------------------------------
		
		Trick tt = t.newTrick(); 
		
		while(t.getTrickNo() != 13) {
			
		for (int i = 0; i < 4; i++) {
			tt.addtoTrick(players.get(i).getPlayerHand().throwCard());
		}
		
		System.out.println("\n" + tt.toString() + "\n");
		
		tt.calculateScore();
		
		players.forEach(x -> {
			if (x.getPlayerHand().lastThrownCard() == tt.calculateWinner()) {
				tt.setWinner(x);
			}
		}); 
		
		
		for (int i = 0; i < 4; i++) {
			if (players.get(i).getPlayerId() == tt.getWinner()) {
				players.get(i).setScore(tt.getScoreCount());
			}
		}
		
		players.forEach(x -> {
			if (x.getPlayerId() == tt.getWinner()) {
				x.addToTrickCardsWon(tt.getTrickCards());
			}
		}); 
		
		players.forEach(x -> System.out.println(x.getPlayerHand().getCards() + "\n"));
		players.forEach(x -> System.out.println(x.toString() + "\n" ));
		players.forEach(x -> System.out.println(x.getTrickCardsWon() + "\n" ));
		
		tt.clearTrick();
		t.incTrickNo(); 
		}

	}
	

}
