import java.util.ArrayList;

public class BasicGame {

	public static void main(String[] args) {
		
		Deck d = new Deck(); 
		Table t = new Table(); 
		ArrayList<Player> players = new ArrayList<>(); 

		for(int i = 0; i < 4; i++) {
			players.add(new AIPlayer(i)); 
		}
		
		players.forEach(x -> System.out.println(x.toString())); 
		
		
		d.shuffle();
		players.forEach(x -> x.getPlayerHand().addCards(d.dealCards()));
		players.forEach(x -> System.out.println(x.getPlayerHand().getCards()));

		
		players.forEach(x -> x.getPlayerHand().sortHand());
		
		
		// --------------------------------Game Play--------------------------------------
		
		Trick tt = t.newTrick(); 
		
		while(t.getTrickNo() != 13) {
			
		for (int i = 0; i < 4; i++) {
			tt.addtoTrick(players.get(i).getPlayerHand().throwCard());
		}
		
		System.out.println("\n" + tt.toString() + "\n");
		
		tt.calculateScore();
		
		players.forEach(x -> {
			if (x.getPlayerHand().lastThrownCard() == tt.calculateWinner()) {
				tt.setWinner(x);
			}
		}); 
		
		
		for (int i = 0; i < 4; i++) {
			if (players.get(i).getPlayerId() == tt.getWinner()) {
				players.get(i).setScore(tt.getScoreCount());
			}
		}
		
		players.forEach(x -> {
			if (x.getPlayerId() == tt.getWinner()) {
				x.addToTrickCardsWon(tt.getTrickCards());
			}
		}); 
		
		players.forEach(x -> System.out.println(x.getPlayerHand().getCards() + "\n"));
		players.forEach(x -> System.out.println(x.toString() + "\n" ));
		players.forEach(x -> System.out.println(x.getTrickCardsWon() + "\n" ));
		
		tt.clearTrick();
		t.incTrickNo(); 
		}

	}

}
